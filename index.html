<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>测试跳转到 App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
          font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          padding: 24px;
        }
        input {
          padding: 8px;
          font-size: 16px;
          width: 300px;
          margin-right: 8px;
        }
        button {
          padding: 10px 16px;
          font-size: 16px;
          border-radius: 6px;
          border: none;
          cursor: pointer;
        }
        p {
          margin-top: 16px;
        }
    </style>
</head>
<body>
<h2>测试通过用户输入 Scheme 打开 App</h2>

<!-- 用户输入 scheme / URL -->
<p>
    <input type="text" id="schemeInput" placeholder="输入 scheme 或完整 URL，例如 mingdao://..." />
    <button onclick="openApp()">打开 App</button>
</p>

<p>
    <button onclick="openAppByA()">通过 a 标签打开 App</button>
</p>

<!-- a 标签占位 -->
<p>
    <a id="schemeLink" href="#"><button>通过 a 标签跳转</button></a>
</p>

<script>
    // JS 打开 App
    function openApp() {
        const userInput = document.getElementById('schemeInput').value.trim();
        if (!userInput) {
            alert('请输入 scheme 或完整 URL');
            return;
        }

        // 如果用户只输入了 scheme，可以拼接默认 path
        let url = userInput;
        if (!userInput.includes('://')) {
            url = userInput + '://ssocallback/access_token=XX&refresh_token=XXX&expire_in=XXX';
        }

        console.log('跳转 URL:', url);
        window.location.href = url;
    }

    // a 标签方式动态设置 href
    function openAppByA() {
        const userInput = document.getElementById('schemeInput').value.trim();
        if (!userInput) {
            alert('请输入 scheme 或完整 URL');
            return;
        }

        let url = userInput;
        if (!userInput.includes('://')) {
            url = userInput + '://ssocallback/access_token=XX&refresh_token=XXX&expire_in=XXX';
        }

        const link = document.getElementById('schemeLink');
        link.href = url;
        link.click();
    }
</script>
</body>
</html>
